<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Bonix AI Hub - Embed AI Models</title>
  <link href="/style.css" rel="stylesheet">
</head>
<body>
  <h1>Embed AI Model</h1>
  <p>Select a model and run your prompt instantly using your custom API key.</p>

  <select id="model" size="6"></select>
  <textarea id="input" placeholder="Type your prompt here..."></textarea>
  <button onclick="runModel()">Run Model</button>
  <div class="output" id="output">Output will appear here...</div>

  <script>
    const CUSTOM_API_KEYS = {
      "meta-llama/Llama-3.1-8B-Instruct": "Llama3#rx5$tkadDl45%",
      "deepseek-ai/DeepSeek-V3-0324": "DeepSeek#rx5$tkadDl45%",
      "cognitivecomputations/dolphin-2.9.1": "Dolphin#rx5$tkadDl45%",
      "deepseek-ai/DeepSeek-R1": "DeepSeekR1#rx5$tkadDl45%"
    };

    function loadModels() {
      const select = document.getElementById('model');
      Object.keys(CUSTOM_API_KEYS).forEach(model => {
        const opt = document.createElement('option');
        opt.value = model;
        opt.textContent = model;
        select.appendChild(opt);
      });
    }

    async function runModel() {
      const model = document.getElementById('model').value;
      const input = document.getElementById('input').value.trim();
      if (!input) return alert("Please enter a prompt!");

      const api_key = CUSTOM_API_KEYS[model];
      const outputEl = document.getElementById('output');
      outputEl.textContent = "Running model...";

      try {
        const res = await fetch('/api/run_model', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ model, api_key, input })
        });
        const json = await res.json();
        outputEl.textContent = json.output || JSON.stringify(json, null, 2);
      } catch (err) {
        outputEl.textContent = "Error: " + err;
      }
    }

    loadModels();
  </script>
</body>
</html>
